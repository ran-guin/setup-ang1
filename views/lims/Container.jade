extends ./../customize/privateLayout
block content

  // standard input variables: 
  //    - plate_ids (array); 
  //    - Samples   (array of hashes)

  - var config = { plate_ids: plate_ids, Samples: Samples };
  - var init = "initialize(" + JSON.stringify(config) + ")";
  - var sampleList = plate_ids.split(/\s*,\s*/);
  
  p &nbsp;
  div.container
     div(ng-app='myApp')
      div(ng-controller="SharedController")
        div(ng-controller="FancyFormController")
          div(ng-controller="ProtocolController" ng-init="#{init}")
          
            include ./../core/errorMsg.jade

            if Samples.length
              
              include ActiveSamples.jade

              if last_step && last_step.protocol
                p &nbsp;
                u Progress: 
                b #{last_step.protocol} [ #{last_step.status} ]
                br 
                span (completed '#{last_step.name}')  
     
              include ContainerOptions.jade 

              include uploadMatrix.jade

            if debug || 1
              hr
              h2.alert.alert-warning Debugging Information:  (hidden in production)
              b session: #{JSON.stringify(session)} 
              BR
              b Samples: #{JSON.stringify(Samples)}
              BR
              b IDs: #{JSON.stringify(sampleList)}
              hr