// standard input variables: 
//    - plate_ids (array); 
//    - Samples   (array of hashes)

form(role='form' method='post' action="/Lab_protocol/run" enctype='form-data')
  input(type = 'hidden' name='Samples' value='{{ Samples }}')
  input(type='hidden' id = 'id' name='plate_ids' value="{{plate_ids}}")
  // b Samples: {{ Samples }}
  table.table
    tr
      td(style='width:30%')
        h2 Continue Protocol: 
      td(style='width:40%; vertical-align:middle')
        //- init = "loadLookup('lab_protocol','','','Select Protocol',\"(Container_format IS NULL OR Container_format = '" + Samples[0].container_format_id + "')\")";
        if Samples[0].last_protocol && Samples[0].protocol_status != 'Completed Protocol'
          - defaultProtocol = Samples[0].last_protocol_id
        - init = "loadLookup('lab_protocol','','Select Protocol',\"(Container_format IS NULL OR Container_format = '" + Samples[0].container_format_id + "') AND ( Sample_type IS NULL OR Sample_type = '" + Samples[0].sample_type_id + "')\")";

  
        span.lookup(id='Lookup-lab_protocol' ng-init="#{init}")
      td(style='width:30%; vertical-align:middle')
        button.btn.btn-lg.btn-success(type='submit' ng-disabled=0) Run Protocol 
        br
        input(type='radio' name='plate_set' ng-model='plate_set' value='new') 
        span &nbsp; Create New Set 
        br
        a(href='#' onclick='return false' ng-click="show('existing_list')" ng-show="!show['existing_list']") Retrieve Existing Set
        a(href='#' onclick='return false' ng-click="hide('existing_list')" ng-show="show['existing_list']") Hide Set(s)
        div(ng-repeat='set in valid_plate_sets' ng-show="show['existing_list']")
          input(type='radio' name='plate_set'  ng-model='plate_set' value='{{set}}' ) 
          span &nbsp; Retrieve Set # {{ set }}
          br

form(role='form' method = 'post' action= "/transfer")
  input(type = 'hidden' name='Samples' value='{{ Samples }}')
  input(type='hidden' id = 'id' name='plate_ids' value="{{plate_ids}}")

  table.table
    tr
      td(style='width:30%')
        h2 Transfer To: 
      td(style='width:40%; vertical-align:middle')
          //span.lookup(id='Lookup-container_format' ng-init="loadLookup('container_format','', 'Select Target Format')") 
          span.lookup(id='Lookup-Capacity' ng-init="loadLookup('rack:Capacity','', 'Select Target Size')") 

          // b &nbsp; Split X: 
          // input(name='split' type='text' size='5px')
      td(style='width:30%; vertical-align:middle')
          button.btn.btn-lg.btn-success(type='submit' ng-click="updateLookups()") Transfer Samples
  